import{_ as b,r as m,c as f,o as A,a as d,b as t,d as r,e as g,q as k,v as C,F as y,h as U,u as _,i as a,t as S}from"./index-Chw7sbpC.js";import{u as x,a as B,E as F,A as h}from"./EmptyState-uA79S__T.js";import{P as E}from"./PhotoUpload-CNpHsULO.js";const L={class:"upload-page"},V={class:"upload-content"},$={class:"album-selector"},D=["value"],I={__name:"Upload",setup(M){_();const s=x(),n=m(""),u=m(!1),i=f(()=>s.sortedAlbums),p=()=>{},c=l=>{console.log("上传成功:",l)},v=l=>{s.addAlbum(l),n.value=l.id,u.value=!1};return A(()=>{i.value.length===0&&(s.setLoading(!0),B.getAlbums().then(l=>{s.setAlbums(l)}).catch(l=>{console.error("Failed to load albums:",l)}).finally(()=>{s.setLoading(!1)}))}),(l,e)=>(a(),d("div",L,[e[6]||(e[6]=t("div",{class:"upload-header"},[t("h1",null,"上传照片"),t("p",null,"选择相册并上传您的照片")],-1)),t("div",V,[t("div",$,[e[5]||(e[5]=t("label",{for:"album-select"},"选择相册：",-1)),k(t("select",{id:"album-select","onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),class:"album-select"},[e[4]||(e[4]=t("option",{value:""},"选择相册",-1)),(a(!0),d(y,null,U(i.value,o=>(a(),d("option",{key:o.id,value:o.id},S(o.name),9,D))),128))],512),[[C,n.value]]),t("button",{onClick:e[1]||(e[1]=o=>u.value=!0),class:"create-album-btn"}," 创建新相册 ")]),n.value?(a(),r(E,{key:0,"album-id":n.value,onClose:p,onUploaded:c},null,8,["album-id"])):(a(),r(F,{key:1,title:"请先选择相册",description:"选择一个相册来上传照片，或者创建新的相册",icon:"upload",onAction:e[2]||(e[2]=o=>u.value=!0),"action-text":"创建相册"}))]),u.value?(a(),r(h,{key:0,onClose:e[3]||(e[3]=o=>u.value=!1),onCreated:v})):g("",!0)]))}},w=b(I,[["__scopeId","data-v-4cd869c5"]]);export{w as default};
